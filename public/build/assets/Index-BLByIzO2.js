import{I as ee}from"./IconAnalytcPreto-BdRXzbYT.js";import{_ as te}from"./AppLayout-BZcXL0MU.js";import{d as o,i as G,o as n,e as l,a as e,n as q,t as r,h as _,v as k,B as D,F as E,j as S,k as h,b as F,w as P,g as A,l as Q,f as N,A as se,c as ae,p as oe}from"./app-CGrFRThM.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCofingBranco-b62jRgVI.js";const ne={class:"grid grid-cols-2 gap-1 mt-5 w-full"},le={class:"flex items-center space-x-2"},re={class:"flex items-center space-x-3"},ie={key:0,class:"flex justify-end items-center space-x-2"},de={key:0,class:"grid grid-cols-4 gap-4 mt-5"},ce={class:"bg-white shadow rounded-md p-6"},ue={class:"text-gray-700"},pe={class:"bg-white shadow rounded-md p-6"},me={class:"text-gray-700"},xe={class:"bg-white shadow rounded-md p-6"},fe={class:"text-gray-700"},ge={class:"bg-white shadow rounded-md p-6"},ve={class:"text-gray-700"},be={class:"grid grid-cols-1 mt-12"},ye={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-md transition-all duration-300"},he={class:"bg-white p-8 rounded-lg shadow-xl w-96 max-w-sm transform transition-all duration-300 ease-in-out animate-modal"},_e={class:"mb-4"},we={class:"mb-4"},Ce={class:"mt-2 text-lg font-semibold"},$e={class:"mb-4"},Ve={class:"mt-2 text-lg font-semibold"},ke={class:"flex justify-between mt-6"},De={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-md transition-all duration-300"},Me={class:"bg-white p-8 rounded-lg shadow-xl w-96 max-w-sm transform transition-all duration-300 ease-in-out animate-modal"},Se={class:"flex justify-between mt-6"},Fe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},Ee={class:"bg-white p-8 rounded-lg shadow-xl w-96 max-w-sm transform transition-all duration-300 ease-in-out animate-modal"},je={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"},Ie={class:"bg-white p-8 rounded-lg shadow-xl w-96 max-w-sm transform transition-all duration-300 ease-in-out animate-modal"},Oe={__name:"StatusCaixa",emits:["updateComponents"],setup(b,{emit:s}){const m=s,g=o(!1),a=o("R$ 0,00"),d=o("R$ 0,00"),c=o("R$ 0,00"),y=o("R$ 0,00"),M=o(0),C=o(0),$=o(0),I=o(!1),O=o(!1),j=o(""),V=o(""),R=o(""),z=o(""),U=o(!1),v=o(""),f=o(!1),p=o(!1),i=o(0),w=async()=>{try{const u=await S.get("/api/historico/caixa");u.data.success&&(v.value=u.data.data.status_caixa,a.value=u.data.data.total_vendas,d.value=u.data.data.valor_abertura,c.value=u.data.data.total_entradas,y.value=u.data.data.total_saidas,M.value=u.data.data.valor_total_final)}catch(u){console.error("Erro ao obter dados do caixa:",u)}},B=()=>{I.value=!0},H=()=>{I.value=!1},J=()=>{O.value=!0},L=()=>{O.value=!1},K=async()=>{try{(await S.post("/api/caixa/operacoes",{tipo:"entrada",valor:j.value,descricao:V.value})).data.success&&(h.success("Entrada adicionada com sucesso!"),w(),H())}catch(u){console.error("Erro ao adicionar entrada:",u),h.error("Erro ao adicionar entrada")}},W=async()=>{try{(await S.post("/api/caixa/operacoes",{tipo:"saida",valor:R.value,descricao:z.value})).data.success&&(h.success("Saída adicionada com sucesso!"),w(),L())}catch(u){console.error("Erro ao adicionar saída:",u),h.error("Erro ao adicionar saída")}},X=async()=>{try{const u=Math.round(parseFloat(String(C.value||"0").replace(",","."))*100),t=Math.round(parseFloat(String($.value||"0").replace(",","."))*100);(await S.post("/api/caixa/fechar",{valor_final:u,diferenca:t})).data.success?(h.success("Caixa fechado com sucesso!"),m("updateComponents"),g.value=!1):h.error("Erro ao fechar o caixa")}catch(u){console.error("Erro ao tentar fechar o caixa:",u),h.error("Erro ao tentar fechar o caixa")}},Y=async()=>{try{U.value=!0;const u=i.value.toString(),t=parseFloat(u.replace("R$","").replace(",","."))*100;(await S.post("/api/caixa/abrir",{valor_inicial:t})).data.success&&(f.value=!0,p.value=!1,m("updateComponents"),h.success("Caixa aberto com sucesso!","success"))}catch(u){console.error("Erro ao abrir o caixa:",u),h.error("Erro ao abrir o caixa. Tente novamente.","error")}finally{U.value=!1}},Z=()=>{const u=parseFloat(String(C.value||"0").replace(",",".")),t=parseFloat(String(M.value||"0").replace(",",".")),x=Math.round(u*100)-Math.round(t*100);$.value=(x/100).toLocaleString("pt-BR",{minimumFractionDigits:2})};return G(()=>{w()}),(u,t)=>(n(),l(E,null,[e("div",ne,[e("div",le,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold text-gray-700 flex items-center"}," Resumo de Vendas ",-1)),e("div",re,[e("div",{class:q(["flex items-center px-2 py-1 rounded-lg text-sm",{"bg-green-100 text-green-700":v.value,"bg-red-100 text-red-700":!v.value}])},[e("div",{class:q([{"bg-green-500":v.value,"bg-red-500":!v.value},"w-2 h-2 rounded-full mr-2"])},null,2),e("span",null,r(v.value?"aberto":"fechado"),1)],2)])]),v.value==="aberto"?(n(),l("div",ie,[e("button",{class:"px-4 py-2 bg-blue-500 text-white rounded flex items-center space-x-2",onClick:B},t[10]||(t[10]=[e("i",{class:"fa-solid fa-plus"},null,-1),e("span",null,"Adicionar entrada",-1)])),e("button",{class:"px-4 py-2 bg-red-500 text-white rounded flex items-center space-x-2",onClick:J},t[11]||(t[11]=[e("i",{class:"fa-solid fa-minus"},null,-1),e("span",null,"Adicionar saída",-1)]))])):_("",!0)]),v.value==="aberto"?(n(),l("div",de,[e("div",ce,[t[12]||(t[12]=e("div",{class:"flex items-center space-x-2"},[e("i",{class:"fas fa-shopping-cart text-gray-500"}),e("h3",{class:"text-gray-900 font-bold"},"Vendas")],-1)),e("p",ue,r(a.value),1)]),e("div",pe,[t[13]||(t[13]=e("div",{class:"flex items-center space-x-2"},[e("i",{class:"fas fa-dollar-sign text-gray-500"}),e("h3",{class:"text-gray-900 font-bold"},"Valor de Abertura")],-1)),e("p",me,r(d.value),1)]),e("div",xe,[t[14]||(t[14]=e("div",{class:"flex items-center space-x-2"},[e("i",{class:"fas fa-arrow-circle-up text-gray-500"}),e("h3",{class:"text-gray-900 font-bold"},"Entradas")],-1)),e("p",fe,r(c.value),1)]),e("div",ge,[t[15]||(t[15]=e("div",{class:"flex items-center space-x-2"},[e("i",{class:"fas fa-arrow-circle-down text-gray-500"}),e("h3",{class:"text-gray-900 font-bold"},"Saídas")],-1)),e("p",ve,r(y.value),1)])])):_("",!0),e("div",be,[e("button",{class:q([v.value==="aberto"?"bg-red-500":"bg-blue-500","px-5 py-3 text-white rounded"]),onClick:t[0]||(t[0]=x=>v.value==="aberto"?g.value=!0:p.value=!0)},[t[16]||(t[16]=e("i",{class:"fas fa-store mr-2"},null,-1)),e("span",null,r(v.value==="aberto"?"Quero fechar meu caixa":"Quero abrir meu caixa"),1)],2)]),g.value?(n(),l("div",ye,[e("div",he,[t[20]||(t[20]=e("h2",{class:"text-2xl font-semibold text-gray-900 mb-6 text-center"}," Fechar Caixa ",-1)),t[21]||(t[21]=e("p",{class:"text-sm text-gray-700 mb-4 text-center"}," Tem certeza que deseja fechar o caixa? Qualquer operação pendente será encerrada. ",-1)),e("div",_e,[t[17]||(t[17]=e("label",{for:"entradaValor",class:"block text-sm font-medium text-gray-700"}," Valor em Caixa ",-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=x=>C.value=x),type:"number",id:"entradaValor",class:"mt-2 p-2 w-full border border-gray-300 rounded-lg",placeholder:"0.00",min:"0",onInput:Z},null,544),[[D,C.value]])]),e("div",we,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"}," Total Vendas em Dinheiro ",-1)),e("p",Ce,"R$ "+r(M.value),1)]),e("div",$e,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Diferença",-1)),e("p",Ve,"R$ "+r($.value),1)]),e("div",ke,[e("button",{onClick:t[2]||(t[2]=x=>g.value=!1),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition duration-200"}," Cancelar "),e("button",{onClick:X,class:"px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition duration-200"}," Confirmar ")])])])):_("",!0),p.value?(n(),l("div",De,[e("div",Me,[t[22]||(t[22]=e("h2",{class:"text-2xl font-semibold text-gray-900 mb-6 text-center"}," Abrir Caixa ",-1)),t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-4 text-center"}," Insira abaixo o valor de abertura do caixa: ",-1)),k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=x=>i.value=x),type:"number",class:"w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite o valor inicial do caixa"},null,512),[[D,i.value]]),e("div",Se,[e("button",{onClick:t[4]||(t[4]=x=>p.value=!1),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition duration-200"}," Cancelar "),e("button",{onClick:Y,class:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition duration-200"}," Confirmar ")])])])):_("",!0),I.value?(n(),l("div",Fe,[e("div",Ee,[t[24]||(t[24]=e("h3",{class:"text-lg font-bold"},"Adicionar Entrada",-1)),k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=x=>j.value=x),type:"number",class:"mt-4 p-2 border border-gray-300 rounded w-full",placeholder:"Valor da entrada"},null,512),[[D,j.value]]),k(e("input",{"onUpdate:modelValue":t[6]||(t[6]=x=>V.value=x),type:"text",class:"mt-2 p-2 border border-gray-300 rounded w-full",placeholder:"Descrição (opcional)"},null,512),[[D,V.value]]),e("div",{class:"mt-4 flex justify-between"},[e("button",{onClick:H,class:"px-4 py-2 bg-gray-300 rounded"}," Cancelar "),e("button",{onClick:K,class:"px-4 py-2 bg-blue-500 text-white rounded"}," Adicionar ")])])])):_("",!0),O.value?(n(),l("div",je,[e("div",Ie,[t[25]||(t[25]=e("h3",{class:"text-lg font-bold"},"Adicionar Saída",-1)),k(e("input",{"onUpdate:modelValue":t[7]||(t[7]=x=>R.value=x),type:"number",class:"mt-4 p-2 border border-gray-300 rounded w-full",placeholder:"Valor da saída"},null,512),[[D,R.value]]),k(e("input",{"onUpdate:modelValue":t[8]||(t[8]=x=>z.value=x),type:"text",class:"mt-2 p-2 border border-gray-300 rounded w-full",placeholder:"Descrição (opcional)"},null,512),[[D,z.value]]),e("div",{class:"mt-4 flex justify-between"},[e("button",{onClick:L,class:"px-4 py-2 bg-gray-300 rounded"}," Cancelar "),e("button",{onClick:W,class:"px-4 py-2 bg-red-500 text-white rounded"}," Adicionar ")])])])):_("",!0)],64))}},Re=T(Oe,[["__scopeId","data-v-01687078"]]),ze={props:{isModalOpen:Boolean,vendaId:Number},data(){return{detalhesVenda:null,isDeleteModalOpen:!1}},watch:{vendaId(b){b&&this.fetchDetalhesVenda(b)}},methods:{async fetchDetalhesVenda(b){try{const s=await S.get(`/api/vendas/detalhes/${b}`);s.data.success&&(this.detalhesVenda=s.data.venda)}catch(s){console.error("Erro ao buscar os detalhes da venda:",s)}},closeModal(){this.$emit("update:isModalOpen",!1)},openDeleteConfirmationModal(){this.isDeleteModalOpen=!0},closeDeleteConfirmationModal(){this.isDeleteModalOpen=!1},async deleteVenda(b){try{(await S.delete(`/api/vendas/deletar/${b}`)).data.success?(this.$emit("update:isModalOpen",!1),this.$emit("updateComponents"),h.success("Venda excluída com sucesso")):h.error("Erro ao excluir a venda")}catch(s){console.error("Erro ao excluir a venda:",s),h.error("Erro ao excluir a venda")}finally{this.isDeleteModalOpen=!1}}}},Ae={key:0,class:"fixed inset-0 z-50 bg-gray-900 bg-opacity-50 flex justify-end items-start"},Te={class:"flex justify-between items-center border-b pb-4 mb-6"},Ue={class:"text-2xl font-semibold flex items-center space-x-2"},Be={class:"material-icons text-blue-500"},qe={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"rgba(8, 118, 178, 1)",transform:"0",msfilter:""}},Ne={key:0},Pe={class:"grid grid-cols-8 gap-4 mb-6 flex justify-between text-center"},He={class:"col-span-2"},Le={class:"font-semibold text-gray-800"},Qe={class:"col-span-2"},Ge={class:"font-semibold text-gray-800"},Je={class:"col-span-2"},Ke={class:"font-semibold text-gray-800"},We={class:"col-span-2"},Xe={class:"font-semibold text-gray-800"},Ye={class:"border-t pt-4 mb-6"},Ze={class:"grid grid-cols-2 gap-4"},et={class:"font-semibold text-red-500 text-right"},tt={class:"font-semibold text-green-500 text-right"},st={class:"font-semibold text-right"},at={class:"border-t pt-4 mb-6"},ot={class:"font-semibold text-lg mb-4 flex items-center space-x-2"},nt={class:"text-gray-500 text-sm"},lt={class:"font-semibold"},rt={class:"border-t pt-4"},it={class:"font-semibold text-lg mb-4 flex items-center space-x-2"},dt={class:"text-gray-500 text-sm"},ct={class:"col-span-1"},ut={class:"col-span-1 text-center"},pt={class:"col-span-1 text-right font-semibold"},mt={class:"mt-6 flex justify-center"},xt={key:0,class:"fixed inset-0 z-50 bg-gray-900 bg-opacity-50 flex justify-center items-center"},ft={class:"bg-white p-8 rounded-lg shadow-xl w-96 max-w-sm transform transition-all duration-300 ease-in-out animate-modal"},gt={class:"flex justify-between"};function vt(b,s,m,g,a,d){return n(),l("div",null,[F(Q,{name:"slide"},{default:P(()=>[m.isModalOpen?(n(),l("div",Ae,[e("div",{class:q(["modal-content w-1/2 bg-white h-full p-6 overflow-y-auto transform transition-transform rounded-lg shadow-lg",{"slide-from-right":m.isModalOpen,"slide-to-right":!m.isModalOpen}])},[e("div",Te,[e("h2",Ue,[e("span",Be,[(n(),l("svg",qe,s[4]||(s[4]=[e("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"},null,-1),e("path",{d:"M11 11h2v6h-2zm0-4h2v2h-2z"},null,-1)])))]),s[5]||(s[5]=e("span",{class:"text-gray-800"},"Detalhes da Venda",-1))]),e("button",{onClick:s[0]||(s[0]=(...c)=>d.closeModal&&d.closeModal(...c)),class:"close-button absolute top-4 right-4 text-gray-500"},s[6]||(s[6]=[e("i",{class:"fas fa-times"},null,-1)]))]),a.detalhesVenda?(n(),l("div",Ne,[e("div",Pe,[e("div",He,[s[7]||(s[7]=e("p",{class:"text-gray-600 uppercase text-xs"},"Cliente",-1)),e("p",Le,r(a.detalhesVenda.cliente),1)]),e("div",Qe,[s[8]||(s[8]=e("p",{class:"text-gray-600 uppercase text-xs"},"Data",-1)),e("p",Ge,r(a.detalhesVenda.data_venda),1)]),e("div",Je,[s[9]||(s[9]=e("p",{class:"text-gray-600 uppercase text-xs"},"Vendido por",-1)),e("p",Ke,r(a.detalhesVenda.vendedor?a.detalhesVenda.vendedor.full_name:"Não informado"),1)]),e("div",We,[s[10]||(s[10]=e("p",{class:"text-gray-600 uppercase text-xs"},"Valor Total",-1)),e("p",Xe," R$ "+r(a.detalhesVenda.valor_total),1)])]),e("div",Ye,[s[14]||(s[14]=e("h3",{class:"font-semibold text-lg mb-4 flex items-center space-x-2"},[e("span",{class:"text-gray-800"},"Resumo de Valores")],-1)),e("div",Ze,[s[11]||(s[11]=e("div",{class:"text-gray-600"},"Desconto",-1)),e("div",et," - R$ "+r(a.detalhesVenda.desconto),1),s[12]||(s[12]=e("div",{class:"text-gray-600"},"Acréscimo",-1)),e("div",tt," + R$ "+r(a.detalhesVenda.acrescimo),1),s[13]||(s[13]=e("div",{class:"text-gray-800 font-semibold"},"Total",-1)),e("div",st," R$ "+r(a.detalhesVenda.valor_total),1)])]),e("div",at,[e("h3",ot,[s[15]||(s[15]=e("span",null,"Formas de Pagamento",-1)),e("span",nt," ("+r(a.detalhesVenda.pagamentos.length)+" métodos) ",1)]),e("ul",null,[(n(!0),l(E,null,A(a.detalhesVenda.pagamentos,(c,y)=>(n(),l("li",{key:y,class:"flex justify-between py-1"},[e("span",null,r(c.name),1),e("span",lt,"R$ "+r(c.valor),1)]))),128))])]),e("div",rt,[e("h3",it,[s[16]||(s[16]=e("span",null,"Resumo de Produtos",-1)),e("span",dt," ("+r(a.detalhesVenda.produtos.length)+" produtos) ",1)]),e("ul",null,[(n(!0),l(E,null,A(a.detalhesVenda.produtos,(c,y)=>(n(),l("li",{key:y,class:"grid grid-cols-3 gap-4 py-1"},[e("span",ct,r(c.nome),1),e("span",ut," x"+r(c.quantidade),1),e("span",pt," R$ "+r(c.valor_total),1)]))),128))])]),e("div",mt,[e("button",{class:"text-red-500 px-4 py-2 rounded-md flex items-center font-bold",onClick:s[1]||(s[1]=(...c)=>d.openDeleteConfirmationModal&&d.openDeleteConfirmationModal(...c))},s[17]||(s[17]=[e("i",{class:"fa fa-trash text-red-500"},null,-1),e("span",{class:"me-2"},"Excluir Venda",-1)]))])])):_("",!0)],2)])):_("",!0)]),_:1}),F(Q,{name:"fade"},{default:P(()=>[a.isDeleteModalOpen?(n(),l("div",xt,[e("div",ft,[s[18]||(s[18]=e("h3",{class:"text-xl font-semibold mb-4 text-center"}," Tem certeza que deseja excluir esta venda? ",-1)),s[19]||(s[19]=e("p",{class:"mb-7 text-gray-600 text-center"},[e("span",{class:"text-red-500 mt-2 font-semibold"}," Essa ação não pode ser desfeita! "),e("br"),e("span",{class:"text-sm"}," Ao exlcuir essa venda todos os produtos venditos nessa venda, a quantidade será reposa novamente no estoque. ")],-1)),e("div",gt,[e("button",{onClick:s[2]||(s[2]=c=>d.deleteVenda(a.detalhesVenda.id)),class:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 w-full mr-2"}," Comfirmar "),e("button",{onClick:s[3]||(s[3]=(...c)=>d.closeDeleteConfirmationModal&&d.closeDeleteConfirmationModal(...c)),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 w-full"}," Cancelar ")])])])):_("",!0)]),_:1})])}const bt=T(ze,[["render",vt],["__scopeId","data-v-986e18e0"]]),yt={class:"mb-1 w-full"},ht={__name:"SearchBarVendas",emits:["search"],setup(b,{emit:s}){const m=o(""),g=s,a=()=>{g("search",m.value)};return(d,c)=>(n(),l("div",yt,[k(e("input",{"onUpdate:modelValue":c[0]||(c[0]=y=>m.value=y),type:"text",placeholder:"Realizar busca...",class:"border border-gray-300 rounded-lg w-full p-3 pl-6 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ease-in-out",onInput:a},null,544),[[D,m.value]])]))}},_t=T(ht,[["__scopeId","data-v-a4fcc49c"]]),wt={class:"space-y-4"},Ct={class:"flex items-center space-x-4"},$t={class:"flex items-center space-x-4"},Vt={__name:"DataFiltro",emits:["atualizarFiltro"],setup(b,{emit:s}){const m=o(""),g=o("");return(a,d)=>(n(),l("div",wt,[e("div",Ct,[d[2]||(d[2]=e("label",{for:"data_inicio",class:"text-sm font-semibold text-gray-700 w-1/3"}," Data Início ",-1)),k(e("input",{id:"data_inicio",type:"date","onUpdate:modelValue":d[0]||(d[0]=c=>m.value=c),class:"p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-2/3"},null,512),[[D,m.value]])]),e("div",$t,[d[3]||(d[3]=e("label",{for:"data_fim",class:"text-sm font-semibold text-gray-700 w-1/3"}," Data Fim ",-1)),k(e("input",{id:"data_fim",type:"date","onUpdate:modelValue":d[1]||(d[1]=c=>g.value=c),class:"p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 w-2/3"},null,512),[[D,g.value]])]),d[4]||(d[4]=e("p",{class:"text-sm text-red-500 mt-5 text-3xl text-center"},[N(" * Registros só serão rastreados nos últimos 90 dias. "),e("br"),N(" Para mais informações, entre em contato com o suporte. ")],-1))]))}},kt=T(Vt,[["__scopeId","data-v-095a0c78"]]),Dt={class:"grid grid-cols-3 gap-4 mt-12"},Mt={class:"col-span-2"},St={class:"col-12 mt-5"},Ft={class:"min-w-full table-auto bg-white rounded-lg shadow-lg overflow-hidden"},Et={key:0},jt=["onClick"],It={class:"px-6 py-4 text-sm text-gray-700 text-center"},Ot={class:"px-6 py-4 text-sm text-gray-700 text-center"},Rt={class:"px-6 py-4 text-sm text-gray-700 text-center"},zt={key:0},At={key:1},Tt={key:0},Ut={class:"px-6 py-4 text-sm text-gray-700 text-center"},Bt={class:"px-6 py-4 text-sm text-gray-700 text-center"},qt={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center z-50"},Nt={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-3xl transform transition-all duration-300 ease-in-out"},Pt={class:"mb-4 flex space-x-4 justify-center"},Ht=["onClick"],Lt={class:"mt-6 flex justify-between"},Qt={__name:"HistoricoVendas",emits:["updateComponents"],setup(b,{emit:s}){const m=s,g=o([]),a=o(!0),d=o(!1),c=o(null),y=o(!1),M=o(""),C=o(""),$=o(""),I=()=>{m("updateComponents"),V()},O=f=>{M.value=f.data_inicio,C.value=f.data_fim,V($.value)},j=f=>{const p=new Date,i=new Date(p);i.setDate(p.getDate()-f),M.value=i.toISOString().split("T")[0];const w=new Date(p);w.setHours(23,59,59,999),C.value=w.toISOString().split("T")[0],V($.value)},V=async(f="")=>{a.value=!0;try{await new Promise(i=>setTimeout(i,2e3));const p=await S.get("/api/historico/vendas",{params:{search:f,data_inicio:M.value,data_fim:C.value}});g.value=p.data}catch(p){console.error("Erro ao carregar o histórico de vendas:",p)}finally{a.value=!1}},R=f=>{$.value=f,V(f)};se([$,M,C],()=>{V($.value)}),G(()=>{j(2)});const z=f=>{c.value=f,d.value=!0},U=()=>{y.value=!0},v=()=>{y.value=!1};return(f,p)=>(n(),l(E,null,[e("div",Dt,[e("div",Mt,[F(_t,{onSearch:R})]),e("div",null,[e("button",{onClick:U,class:"p-3 bg-gray-400 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 w-full flex items-center justify-center space-x-2 transition-colors duration-200"},p[2]||(p[2]=[e("i",{class:"fas fa-filter"},null,-1),e("span",null,"Filtro",-1)]))])]),e("div",St,[e("table",Ft,[p[4]||(p[4]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider"}," Cliente "),e("th",{class:"px-6 py-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider"}," Data / Hora "),e("th",{class:"px-6 py-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider"}," Forma de Pagamento "),e("th",{class:"px-6 py-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider"}," Valor "),e("th",{class:"px-6 py-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider"}," Vendido por ")])],-1)),e("tbody",null,[a.value?(n(),l("tr",Et,p[3]||(p[3]=[e("td",{colspan:"5",class:"text-center py-4 text-gray-500"}," Carregando... ",-1)]))):_("",!0),(n(!0),l(E,null,A(g.value,i=>(n(),l("tr",{key:i.id,class:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:w=>z(i.id)},[e("td",It,r(i.cliente),1),e("td",Ot,r(i.data_venda),1),e("td",Rt,[i.pagamentos.length>1?(n(),l("span",zt,"Composto")):(n(),l("span",At,[(n(!0),l(E,null,A(i.pagamentos,(w,B)=>(n(),l("span",{key:B},[N(r(w.forma_pagamento)+" ",1),B<i.pagamentos.length-1?(n(),l("span",Tt,",")):_("",!0)]))),128))]))]),e("td",Ut," R$ "+r(i.valor_total),1),e("td",Bt,r(i.vendedor?i.vendedor.full_name:"Não informado"),1)],8,jt))),128))])]),F(bt,{isModalOpen:d.value,modalTitle:"Detalhes da Venda",vendaId:c.value,onUpdateComponents:I,"onUpdate:isModalOpen":p[0]||(p[0]=i=>d.value=i)},null,8,["isModalOpen","vendaId"])]),y.value?(n(),l("div",qt,[e("div",Nt,[p[5]||(p[5]=e("h2",{class:"text-xl font-semibold mb-6 text-center text-gray-800"}," Filtro de Data ",-1)),e("div",Pt,[(n(),l(E,null,A([10,30,60,80,90],i=>e("button",{key:i,onClick:w=>j(i),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Últimos "+r(i)+" dias ",9,Ht)),64))]),F(kt,{onAtualizarFiltro:O}),e("div",Lt,[e("button",{onClick:v,class:"px-6 py-2 bg-gray-300 w-full mr-2 text-gray-700 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Fechar "),e("button",{onClick:p[1]||(p[1]=(...i)=>f.aplicarFiltro&&f.aplicarFiltro(...i)),class:"px-6 py-2 bg-blue-500 w-full text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Aplicar Filtro ")])])])):_("",!0)],64))}},Gt=T(Qt,[["__scopeId","data-v-dac21cc9"]]),Jt={class:"flex flex-1"},Kt={class:"content-wrapper flex-1 bg-gray-100 p-4"},Wt={class:"content"},Xt={class:"container-fluid"},Yt={class:"row"},Zt={class:"col-12"},es={class:"text-2xl font-bold text-sky-500 flex items-center"},ls={__name:"Index",setup(b,{emit:s}){function m(){console.log("Atualizando componentes"),oe.visit(window.location.href,{preserveScroll:!0,preserveState:!1})}return(g,a)=>(n(),ae(te,{title:"Histórico"},{default:P(()=>[e("div",Jt,[e("div",Kt,[e("section",Wt,[e("div",Xt,[e("div",Yt,[e("div",Zt,[e("h1",es,[F(ee,{class:"h-6 w-6 mr-2"}),a[0]||(a[0]=N(" Histórico de Vendas "))]),a[1]||(a[1]=e("p",{class:"text-gray-600 mt-2"}," Visualize o histórico de vendas realizadas na sua empresa. ",-1))])]),F(Re,{onUpdateComponents:m}),F(Gt,{onUpdateComponents:m})])])])])]),_:1}))}};export{ls as default};
