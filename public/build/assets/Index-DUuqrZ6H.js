import{d as y,u as p,o as i,e as f,a as e,f as $,m as V,v as u,C as T,F as P,g as F,t as b,B as g,x as E,h as x,p as M,k as c,A as I,c as k,w as h,b as C,n as j,l as S}from"./app-CGrFRThM.js";import{I as z}from"./IconHomePreto-BBA6gPFZ.js";import{_ as A}from"./AppLayout-BZcXL0MU.js";import{u as D}from"./store-CiEZvh8G.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./IconCofingBranco-b62jRgVI.js";const O={key:0,class:"fixed inset-0 z-50 bg-gray-900 bg-opacity-50 flex justify-end"},H={class:"modal-content w-50 sm:w-4/5 md:w-2/3 lg:w-1/2 xl:w-1/2 bg-white p-6 h-full overflow-auto transform transition-all duration-300 ease-in-out"},L={class:"flex gap-4 mt-6"},G={class:"w-1/2"},J=["value"],K={class:"w-1/2"},Q={class:"flex gap-4 mt-6"},R={class:"w-1/2"},W={class:"w-1/2"},X={class:"flex items-center mt-6"},Y={for:"is_active",class:"relative inline-flex items-center cursor-pointer"},Z={class:"flex gap-4 mt-4"},ee=["disabled"],te={__name:"CadastroMetoPagamento",setup(_){const d=D(),n=y(!1),a=y({name:"",type:"",fee_percentage:0,bank_account:"",is_active:!0}),v={D:"Dinheiro",C:"Crédito",T:"Débito",P:"Pix"},m=()=>{d.deactivateComponent(),a.value={name:"",type:"",fee_percentage:null,bank_account:"",is_active:!1}},l=async()=>{n.value=!0;try{await M.post(route("formas_pagamento.adicionar"),a.value,{onSuccess:()=>{c.success("Forma de pagamento cadastrada com sucesso!"),m()},onError:r=>{console.error(r),c.error("Erro ao cadastrar a forma de pagamento. Verifique os dados e tente novamente.")}})}catch(r){console.error("Erro inesperado:",r),c.error("Ocorreu um erro inesperado. Tente novamente mais tarde.")}finally{n.value=!1}};return(r,o)=>p(d).activeComponent==="metodo_pagamento"?(i(),f("div",O,[e("div",H,[e("button",{onClick:m,class:"close-button absolute top-4 right-4 text-gray-500"},o[5]||(o[5]=[e("i",{class:"fas fa-times"},null,-1)])),o[14]||(o[14]=e("h2",{class:"text-2xl mb-4"},[e("i",{class:"fa-solid fa-credit-card"}),$(" Nova Forma de Pagamento ")],-1)),e("form",{onSubmit:V(l,["prevent"]),class:"grid gap-4"},[e("div",L,[e("div",G,[o[7]||(o[7]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700"}," Forma de Pagamento * ",-1)),u(e("select",{id:"type","onUpdate:modelValue":o[0]||(o[0]=t=>a.value.type=t),required:"",class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},[o[6]||(o[6]=e("option",{disabled:"",value:""},"Selecione",-1)),(i(),f(P,null,F(v,(t,s)=>e("option",{key:s,value:s},b(t),9,J)),64))],512),[[T,a.value.type]])]),e("div",K,[o[8]||(o[8]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nome da Forma de Pagamento ",-1)),u(e("input",{type:"text",id:"name","onUpdate:modelValue":o[1]||(o[1]=t=>a.value.name=t),required:"",class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},null,512),[[g,a.value.name]])])]),e("div",Q,[e("div",R,[o[9]||(o[9]=e("label",{for:"fee_percentage",class:"block text-sm font-medium text-gray-700"}," Taxa % ",-1)),u(e("input",{type:"number",id:"fee_percentage","onUpdate:modelValue":o[2]||(o[2]=t=>a.value.fee_percentage=t),required:"",class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},null,512),[[g,a.value.fee_percentage]])]),e("div",W,[o[10]||(o[10]=e("label",{for:"bank_account",class:"block text-sm font-medium text-gray-700"}," Conta Bancária ",-1)),u(e("input",{type:"text",id:"bank_account","onUpdate:modelValue":o[3]||(o[3]=t=>a.value.bank_account=t),class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},null,512),[[g,a.value.bank_account]])])]),e("div",X,[e("label",Y,[u(e("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":o[4]||(o[4]=t=>a.value.is_active=t),class:"sr-only peer"},null,512),[[E,a.value.is_active]]),o[11]||(o[11]=e("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-blue-500 peer-focus:ring-2 peer-focus:ring-blue-300 transition-all duration-300"},null,-1)),o[12]||(o[12]=e("div",{class:"absolute left-1 top-1 w-4 h-4 bg-white border border-gray-300 rounded-full peer-checked:translate-x-5 transition-transform duration-300"},null,-1)),o[13]||(o[13]=e("span",{class:"ml-3 text-sm font-medium text-gray-700"}," Ativar Forma de Pagamento ",-1))])]),e("div",Z,[e("button",{type:"button",onClick:m,class:"w-1/2 px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100"}," Cancelar "),e("button",{type:"submit",class:"w-1/2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",disabled:n.value}," Salvar ",8,ee)])],32)])])):x("",!0)}},oe=N(te,[["__scopeId","data-v-9b64afab"]]),ae={key:0,class:"fixed inset-0 z-50 bg-gray-900 bg-opacity-50 flex justify-end"},se={class:"modal-content w-50 sm:w-4/5 md:w-2/3 lg:w-1/2 xl:w-1/2 bg-white p-6 h-full overflow-auto transform transition-all duration-300 ease-in-out"},ne={class:"flex gap-4 mt-6"},re={class:"w-1/2"},le=["value"],de={class:"w-1/2"},ie={class:"flex gap-4 mt-6"},ue={class:"w-1/2"},me={class:"w-1/2"},ce={class:"flex items-center mt-6"},pe={for:"is_active",class:"relative inline-flex items-center cursor-pointer"},be={class:"flex gap-4 mt-4"},fe=["disabled"],ge={key:0,class:"absolute inset-0 flex justify-center items-center bg-gray-50 bg-opacity-50"},ve={__name:"EditarMetodoPagamento",props:{paymentMethods:Object},setup(_){const d=D(),n=y(!1),a=y({id:null,name:"",type:"",fee_percentage:0,bank_account:"",is_active:"",empresa_id:""}),v={D:"Dinheiro",C:"Crédito",T:"Débito",P:"Pix"};I(()=>d.selectedPaymentMethod,o=>{o&&(a.value={...o})},{immediate:!0});const m=()=>{d.deactivateComponent(),a.value={id:null,name:"",type:"",fee_percentage:0,bank_account:"",empresa_id:"",is_active:!0}},l=async()=>{n.value=!0;try{const{id:o,name:t,type:s,fee_percentage:w,bank_account:U,is_active:q,empresa_id:B}=a.value;if(!o){c.error("ID da forma de pagamento não encontrado.");return}await M.post(route("formas_pagamento.update",{id:o}),{name:t,type:s,fee_percentage:w,bank_account:U,is_active:q,empresa_id:B}),c.success("Forma de pagamento atualizada com sucesso."),m()}catch(o){c.error("Erro ao atualizar a forma de pagamento."),console.error(o)}finally{n.value=!1}},r=async()=>{if(!a.value.id){c.error("ID da forma de pagamento não encontrado.");return}if(confirm(`Tem certeza que deseja excluir a forma de pagamento "${a.value.name}"?`))try{await M.delete(route("paymentMethod.destroy",{paymentMethod:a.value.id})),c.success("Forma de pagamento excluída com sucesso."),m()}catch(t){c.error("Erro ao excluir a forma de pagamento."),console.error(t)}};return(o,t)=>p(d).activeComponent==="editar_metodo_pagamento"?(i(),f("div",ae,[e("div",se,[e("button",{onClick:m,class:"close-button absolute top-4 right-4 text-gray-500"},t[5]||(t[5]=[e("i",{class:"fas fa-times"},null,-1)])),e("h2",{class:"text-2xl mb-2"},[t[7]||(t[7]=e("i",{class:"fa-solid fa-credit-card mr-3"},null,-1)),t[8]||(t[8]=e("span",null,"Editar Forma de Pagamento",-1)),e("button",{onClick:r,class:"hover:text-red-800 transition-colors p-3",title:"Excluir Forma de Pagamento"},t[6]||(t[6]=[e("i",{class:"fa-solid fa-trash-can fa-xs"},null,-1)]))]),e("form",{onSubmit:V(l,["prevent"]),class:"grid gap-4"},[e("div",ne,[e("div",re,[t[10]||(t[10]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700"}," Forma de Pagamento * ",-1)),u(e("select",{id:"type","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.type=s),required:"",class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},[t[9]||(t[9]=e("option",{disabled:"",value:""},"Selecione",-1)),(i(),f(P,null,F(v,(s,w)=>e("option",{key:w,value:w},b(s),9,le)),64))],512),[[T,a.value.type]])]),e("div",de,[t[11]||(t[11]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nome da Forma de Pagamento ",-1)),u(e("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.name=s),required:"",class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},null,512),[[g,a.value.name]])])]),e("div",ie,[e("div",ue,[t[12]||(t[12]=e("label",{for:"fee_percentage",class:"block text-sm font-medium text-gray-700"}," Taxa % ",-1)),u(e("input",{type:"number",id:"fee_percentage","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.fee_percentage=s),required:"",class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},null,512),[[g,a.value.fee_percentage]])]),e("div",me,[t[13]||(t[13]=e("label",{for:"bank_account",class:"block text-sm font-medium text-gray-700"}," Conta Bancária ",-1)),u(e("input",{type:"text",id:"bank_account","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.bank_account=s),class:"mt-1 px-3 py-2 w-full border border-gray-300 rounded"},null,512),[[g,a.value.bank_account]])])]),e("div",ce,[e("label",pe,[u(e("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.is_active=s),value:"true",class:"sr-only peer"},null,512),[[E,a.value.is_active]]),t[14]||(t[14]=e("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer-checked:bg-blue-500 peer-focus:ring-2 peer-focus:ring-blue-300 transition-all duration-300"},null,-1)),t[15]||(t[15]=e("div",{class:"absolute left-1 top-1 w-4 h-4 bg-white border border-gray-300 rounded-full peer-checked:translate-x-5 transition-transform duration-300"},null,-1)),t[16]||(t[16]=e("span",{class:"ml-3 text-sm font-medium text-gray-700"}," Ativar Forma de Pagamento ",-1))])]),e("div",be,[e("button",{type:"button",onClick:m,class:"w-1/2 px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100"}," Cancelar "),e("button",{type:"submit",class:"w-1/2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",disabled:n.value}," Salvar ",8,fe)]),n.value?(i(),f("div",ge,t[17]||(t[17]=[e("div",{class:"loader border-4 border-t-blue-500 border-gray-200 rounded-full w-12 h-12 animate-spin"},null,-1)]))):x("",!0)],32)])])):x("",!0)}},ye=N(ve,[["__scopeId","data-v-3765933a"]]),xe={class:"flex flex-1"},_e={class:"content-wrapper flex-1 bg-gray-100 p-4"},we={class:"content"},ke={class:"container-fluid"},he={class:"row"},Ce={class:"col-12"},$e={class:"text-2xl font-bold text-sky-500 flex items-center"},Me={class:"container-fluid"},Pe={class:"flex justify-between items-center"},Fe={class:"flex space-x-4"},De={class:"flex gap-2"},Se={class:"bg-white shadow-md rounded-lg p-4"},Ve={class:"table-auto w-full text-left border-collapse mt-4 shadow-md rounded-lg overflow-hidden"},Te=["onClick"],Ee={class:"px-4 py-3"},Ne={class:"px-3 py-3 text-center hidden md:table-cell"},Ue={class:"px-4 py-3 text-center hidden lg:table-cell"},qe={class:"px-4 py-3 text-center hidden xl:table-cell"},Be={class:"px-4 py-3 text-center hidden xl:table-cell"},Le={__name:"Index",props:{paymentMethods:{type:Array,required:!0}},setup(_){const d=y("Metodos"),n=D(),a=()=>{n.activateComponent("metodo_pagamento")},v={D:"Dinheiro",C:"Crédito",T:"Débito",P:"Pix"};return(m,l)=>(i(),k(A,{title:"Formas de Pagamento"},{default:h(()=>[e("div",xe,[e("div",_e,[e("section",we,[e("div",ke,[e("div",he,[e("div",Ce,[e("h1",$e,[C(z,{class:"h-6 w-6 mr-2"}),l[1]||(l[1]=$(" Formas de Pagamento "))]),l[4]||(l[4]=e("div",{class:"mt-4"},null,-1)),e("div",Me,[e("div",Pe,[e("div",Fe,[e("button",{class:j(["px-4 py-3 rounded-t-lg focus:outline-none",{"bg-white text-blue-600 font-semibold":d.value==="Metodos","bg-gray-100 text-gray-600":d.value!=="Metodos"}]),onClick:l[0]||(l[0]=r=>d.value="Metodos")}," Metodos ",2)]),e("div",De,[e("button",{onClick:a,class:"px-4 py-2 bg-blue-500 text-white rounded"},l[2]||(l[2]=[e("i",{class:"fa-solid fa-plus"},null,-1),$(" Nova Forma de Pagamento ")])),C(S,{name:"slide"},{default:h(()=>[p(n).activeComponent==="metodo_pagamento"?(i(),k(oe,{key:0,paymentMethods:_.paymentMethods},null,8,["paymentMethods"])):x("",!0)]),_:1}),C(S,{name:"slide"},{default:h(()=>[p(n).activeComponent==="editar_metodo_pagamento"?(i(),k(ye,{key:0,paymentMethods:p(n).selectedPaymentMethod},null,8,["paymentMethods"])):x("",!0)]),_:1})])]),e("div",Se,[e("table",Ve,[l[3]||(l[3]=e("thead",{class:"bg-gray-100 border-b"},[e("tr",null,[e("th",{class:"px-4 py-3"},"Nome"),e("th",{class:"px-4 py-3 text-center hidden sm:table-cell"}," Tipo "),e("th",{class:"px-4 py-3 text-center hidden lg:table-cell"}," Taxa (%) "),e("th",{class:"px-4 py-3 text-center hidden xl:table-cell"}," Conta Bancária "),e("th",{class:"px-4 py-3 text-center hidden xl:table-cell"}," Status ")])],-1)),e("tbody",null,[(i(!0),f(P,null,F(_.paymentMethods,r=>(i(),f("tr",{key:r.id,onClick:o=>{p(n).activateComponent("editar_metodo_pagamento"),p(n).setSelectedPaymentMethod(r)},class:"border-b cursor-pointer"},[e("td",Ee,b(r.name),1),e("td",Ne,b(v[r.type]||"Desconhecido"),1),e("td",Ue,b(r.fee_percentage)+"% ",1),e("td",qe,b(r.bank_account||"Não informado"),1),e("td",Be,b(r.is_active?"Ativo":"Inativo"),1)],8,Te))),128))])])])])])])])])])])]),_:1}))}};export{Le as default};
